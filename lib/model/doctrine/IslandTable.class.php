<?php

/**
* IslandTable
* 
* This class has been auto-generated by the Doctrine ORM Framework
*/
class IslandTable extends Doctrine_Table {
	/**
	* Returns an instance of this class.
	*
	* @return object IslandTable
	*/
	public static function getInstance() {
		return Doctrine_Core::getTable('Island');
	}
	
	/**
	 * Returns the ID of the default island to show in selects
	 *
	 * @param	string	$regionId
	 * @return	integer
	 * 
	 * @author	Eliezer Talon
	 * @version	2011-04-13
	 */
	public function getDefaultIslandId($regionId) {
		$island = $this->createQuery()
			->from('Island i')
			->where('i.name LIKE ?', '%'.sfConfig::get('app_default_island_name').'%')
			->fetchOne();
		
		return $island->getId();
	}
	
	/**
	 * Returns a query that select islands of a region
	 *
	 * @param string $regionId
	 * @return object DoctrineRecord
	 * @author Eliezer Talon
	 */
	public function getIslandsQuery($regionId = null) {
		$query = $this->createQuery('i');
		if ( $regionId ) {
			$query->where('i.region_id = ?', $regionId);
		}
		return $query;
	}
}