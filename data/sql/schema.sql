CREATE TABLE country (id BIGINT AUTO_INCREMENT, name TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE ecosystem (id BIGINT AUTO_INCREMENT, name TEXT, city TEXT, province_id BIGINT, lanscape_picture TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX province_id_idx (province_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE environment (id BIGINT AUTO_INCREMENT, name TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE province (id BIGINT AUTO_INCREMENT, name TEXT, country_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX country_id_idx (country_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE role (id BIGINT AUTO_INCREMENT, name TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sample (id BIGINT AUTO_INCREMENT, number BIGINT UNSIGNED UNIQUE NOT NULL, ecosystem_id BIGINT, location TEXT, latitude_degrees BIGINT, longitude_degrees BIGINT, latitude_minutes FLOAT(18, 2), longitude_minutes FLOAT(18, 2), environment_id BIGINT, ph FLOAT(18, 2), conductivity FLOAT(18, 2), temperature FLOAT(18, 2), salinity FLOAT(18, 2), close_picture TEXT, laboratory_picture TEXT, collector_id BIGINT, collection_date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX ecosystem_id_idx (ecosystem_id), INDEX environment_id_idx (environment_id), INDEX collector_id_idx (collector_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user (id BIGINT AUTO_INCREMENT, username TEXT NOT NULL, password TEXT NOT NULL, name TEXT NOT NULL, surname TEXT NOT NULL, email TEXT NOT NULL, role_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX role_id_idx (role_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE ecosystem ADD CONSTRAINT ecosystem_province_id_province_id FOREIGN KEY (province_id) REFERENCES province(id);
ALTER TABLE province ADD CONSTRAINT province_country_id_country_id FOREIGN KEY (country_id) REFERENCES country(id);
ALTER TABLE sample ADD CONSTRAINT sample_environment_id_environment_id FOREIGN KEY (environment_id) REFERENCES environment(id);
ALTER TABLE sample ADD CONSTRAINT sample_ecosystem_id_ecosystem_id FOREIGN KEY (ecosystem_id) REFERENCES ecosystem(id);
ALTER TABLE sample ADD CONSTRAINT sample_collector_id_user_id FOREIGN KEY (collector_id) REFERENCES user(id);
ALTER TABLE user ADD CONSTRAINT user_role_id_role_id FOREIGN KEY (role_id) REFERENCES role(id);
